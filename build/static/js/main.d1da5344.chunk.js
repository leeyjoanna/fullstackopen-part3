(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),a=t.n(c),o=(t(20),t(6)),s=t(3),u=(t(21),t(0)),i=function(e){var n=e.newSearch,t=e.handleNewSearch;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Search"}),Object(u.jsxs)("form",{children:["filter: shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})]})},d=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewName,c=e.newNumber,a=e.handleNewNumber;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add a new entry: "}),Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},j=t(4),l=t.n(j),b="/api/persons",h=function(){return l.a.get(b).then((function(e){return e.data}))},f=function(e){return l.a.post(b,e).then((function(e){return e.data}))},O=function(e){return l.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return l.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.person,t=e.setShowSearch,r=e.setPersons,c=e.persons,a=e.setErrorMessage;return Object(u.jsxs)("div",{children:[n.id,"- ",n.name,": ",n.number,Object(u.jsx)("button",{onClick:function(){return function(e,n,t,r,c,a){window.confirm("Are you sure you want to delete ".concat(e,"?"))&&O(n).then((function(e){t(c.filter((function(e){return e.id!==n}))),r(c.filter((function(e){return e.id!==n})))})).catch((function(n){a("unable to update, ".concat(e," already was deleted")),setTimeout((function(){a(null),window.location.reload()}),4e3)}))}(n.name,n.id,t,r,c,a)},children:"Delete"})]})},w=function(e){var n=e.showSearch,t=e.setShowSearch,r=e.setPersons,c=e.persons,a=e.setErrorMessage;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(u.jsx)(p,{person:e,setShowSearch:t,setPersons:r,persons:c,setErrorMessage:a},e.id)}))]})},x=function(e){var n=e.message;return null===n?Object(u.jsx)("div",{}):Object(u.jsx)("div",{className:"message",children:n})},v=function(e){var n=e.errorMessage;return null===n?Object(u.jsx)("div",{}):Object(u.jsx)("div",{className:"error",children:n})},S=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),j=Object(s.a)(a,2),l=j[0],b=j[1],O=Object(r.useState)(""),p=Object(s.a)(O,2),S=p[0],g=p[1],N=Object(r.useState)(""),C=Object(s.a)(N,2),y=C[0],k=C[1],P=Object(r.useState)([]),E=Object(s.a)(P,2),M=E[0],U=E[1],T=Object(r.useState)(null),A=Object(s.a)(T,2),D=A[0],I=A[1],J=Object(r.useState)(null),B=Object(s.a)(J,2),q=B[0],z=B[1];Object(r.useEffect)((function(){h().then((function(e){c(e),U(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(x,{message:D}),Object(u.jsx)(v,{errorMessage:q}),Object(u.jsx)(i,{newSearch:y,handleNewSearch:function(e){k(e.target.value);var n=e.target.value;U(t.filter((function(e){return function(e){if(-1!==e.name.toUpperCase().search(n.toUpperCase()))return!0}(e)})))}}),Object(u.jsx)(d,{addPerson:function(e){if(e.preventDefault(),-1!==t.findIndex((function(e,n){return e.name.toUpperCase()===l.toUpperCase()})))if(window.confirm("".concat(l," already exists, would you like to update their number?"))){var n=t.find((function(e){return e.name.toUpperCase()===l.toUpperCase()})),r=n.id,a=Object(o.a)(Object(o.a)({},n),{},{number:S});m(r,a).then((function(e){c(t.map((function(e){return e.id===r?a:e}))),U(t.map((function(e){return e.id===r?a:e}))),b(""),g("")})).catch((function(e){z("unable to update!"),setTimeout((function(){z(null),window.location.reload()}),4e3)}))}else b(""),g("");else f({name:l,number:S}).then((function(e){c(t.concat(e)),U(t.concat(e)),g(""),b(""),I("".concat(l," has been added!")),setTimeout((function(){I(null)}),4e3)})).catch((function(e){z("unable to add!"),setTimeout((function(){z(null),window.location.reload()}),4e3)}))},newName:l,handleNewName:function(e){b(e.target.value)},newNumber:S,handleNewNumber:function(e){g(e.target.value)}}),Object(u.jsx)(w,{showSearch:M,persons:t,setShowSearch:U,setPersons:c,setErrorMessage:z})]})};a.a.render(Object(u.jsx)(S,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d1da5344.chunk.js.map